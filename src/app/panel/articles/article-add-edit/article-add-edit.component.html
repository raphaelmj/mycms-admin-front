<div class="overshadow"
  (click)="closeEdit()">

</div>

<div class="saving-over"
  *ngIf="isSaving$| async">
  <mat-spinner color="accent"></mat-spinner>
</div>

<div class="edit-area">


  <div class="close-btn"
    (click)="closeEdit()">
    <span class="material-icons">
      close
    </span></div>

  <div class="scroll-inside">



    <div class="container-fluid">

      <div class="row">
        <div class="col-md-12 col-form">

          <form [formGroup]="formA"
            (submit)="saveData()">

            <div class="row">
              <div class="col-lg-6">
                <p class="text-muted d-flex align-items-center justify-content-center h-100"
                  *ngIf="noImage && !croppedImage">
                  Bez obrazka
                </p>
                <img [src]="webUrl+article.image"
                  class="img-fluid"
                  *ngIf="article.image && !croppedImage && !noImage">
                <img [src]="croppedImage"
                  class="img-fluid"
                  *ngIf="croppedImage">
                <br>
                <button mat-raised-button
                  color="warn"
                  type="button"
                  (click)="noImage=true;croppedImage=null"
                  *ngIf="croppedImage || article.image">
                  <span class="material-icons">
                    replay
                  </span> Bez obrazka
                </button>
                <button mat-raised-button
                  color="primary"
                  type="button"
                  (click)="openEditImage()">
                  <span class="material-icons">
                    add_photo_alternate
                  </span>
                  Zmień/Dodaj</button>
                <button mat-raised-button
                  type="button"
                  (click)="croppedImage=null"
                  *ngIf="croppedImage"><span class="material-icons">
                    replay
                  </span> Przywróć</button>
              </div>
              <div class="col-lg-6">
                <mat-form-field class="w-100">
                  <input matInput
                    placeholder="Nazwa"
                    formControlName="title">
                </mat-form-field>
                <mat-form-field class="w-100">
                  <input matInput
                    [ngxMatDatetimePicker]="picker"
                    placeholder="Data publikacji"
                    formControlName="publishedAt">
                  <mat-datepicker-toggle matSuffix
                    [for]="picker"></mat-datepicker-toggle>
                  <ngx-mat-datetime-picker #picker
                    [touchUi]="touchUi">
                  </ngx-mat-datetime-picker>
                </mat-form-field>
                <mat-slide-toggle formControlName="status">opublikowany</mat-slide-toggle>
              </div>
            </div>

            <div class="row">
              <div class="col-12">
                <hr>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-6">
                <h2>Wstęp</h2>
                <ckeditor formControlName="short" [config]="ckConfig"></ckeditor>
              </div>
              <div class="col-lg-6">
                <h2>Rozwinięcie</h2>
                <ckeditor formControlName="content" [config]="ckConfig"></ckeditor>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-6">
                <h2>Lewa kolumna treści</h2>
                <ckeditor formControlName="leftContent" [config]="ckConfig"></ckeditor>
              </div>
              <div class="col-lg-6">
                <h2>Prawa kolumna treści</h2>
                <ckeditor formControlName="rightContent" [config]="ckConfig"></ckeditor>
              </div>
            </div>

            <div class="row">
              <div class="col-12">
                <hr>
              </div>
            </div>

            <div class="row">
              <div class="col-md-4">
                <mat-form-field class="w-100">
                  <input matInput
                         placeholder="Meta Title"
                         formControlName="metaTitle">
                </mat-form-field>
              </div>
              <div class="col-md-4">
                <mat-form-field class="w-100">
                  <textarea matInput placeholder="Meta Keywords" formControlName="metaKeywords"></textarea>
                </mat-form-field>
              </div>
              <div class="col-md-4">
                <mat-form-field class="w-100">
                  <textarea matInput placeholder="Meta Description" formControlName="metaDescription"></textarea>
                </mat-form-field>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <hr>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-12">
                <mat-form-field appearance="fill">
                  <mat-label>Kategorie</mat-label>
                  <mat-select formControlName="categoryId">
                    <mat-option *ngFor="let c of selectCategories" [value]="c.id">
                      {{c.name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>

            <div class="row">
              <div class="col-12">
                <hr>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6">
                <button mat-raised-button
                  color="primary"
                  class="btn-save">
                  Zapisz
                </button>
              </div>
            </div>

          </form>

        </div>
      </div>

    </div>

  </div>

</div>
<ng-template #tempImage></ng-template>
